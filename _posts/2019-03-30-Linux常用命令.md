---
layout: post
title: Linux常用命令整理 
categories: 系统运维
description: 常用的linux命令，通过整理这些命令，方便以后查询。
keywords: 系统运维,Linux
---
把日常的linux命令记录下来，方便以后查询，所谓好记性，不如烂笔头。

## 常用命令

1、释放Linux内存命令

```java
   echo 1 > /pro/sys/vm/drop_caches
```
2、查看当前文件下面文件大小

```java
   du -sh *
```
3、看http的并发请求数及其TCP连接状态

```java
   netstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'
```

4查看网卡名称

```shell
cat /proc/net/dev | awk '{i++; if(i>2){print $1}}' | sed 's/^[\t]*//g' | sed 's/[:]*$//g'
```

5、查看进程文件打开数量

```
ps aux|grep 进程名     # 查看进程号
lsof -p 进程号         # 查看单个进程所有打开的文件详情
lsof -p 进程号 |grep 'sock' -c  #查看sock名称的数量
lsof -p 11127 | wc -l   # 统计进程打开了多少文件
lsof -p 进程id > openfiles.log  将执行结果内容输出到日志文件中查看(当文件太多的情况)
cat lsof.log | awk '{print $8}' | sort | uniq -c | sort -rn | head -n 10 #筛选出占用句柄前十的信息
lsof -n |awk '{print $2}'|sort|uniq -c |sort -nr|more #查看句柄使用情况
```

6、查找文件

```
less +99%p logs/catalina.out  #查看99%文件比例
cat 文件 |grep "搜索的字符"
文件夹内查找
grep -r -e "password" ./log/
```

7、vi 查找替换命令

```shell
%s/需要替换的内容/替换内容/g
```

8、kill命令

```
做系统稳定性问题分析，当遇到系统卡死时，我们经常要使用“kill -3 pid”来打印System_Server进程各个线程的Java调用栈，根据线程状态及调用栈来更进一步定位问题点，当然某个应该界面卡顿时间长时也可以通过这个命令来抓取Java调用栈进行分析。注意native进程是不能用kill -3来打trace的，而是使用debuggerd.

kill -3 pid 后文件的保存路径为：/proc/${pid}/cwd
```

8、查看文件夹大小

```
Linux中查看各文件夹大小命令du -h --max-depth=1
```

9、查看系统用户

```
cat /etc/passwd | grep bash
```

