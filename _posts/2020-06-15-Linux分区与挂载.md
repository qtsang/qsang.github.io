---
layout: post
title: linux分区与挂载
categories: LINUX
description: linux分区与挂载
keywords: linux、系统运维

---

Linux fdisk 和 mount 命令操作指南，linux磁盘管理、新增磁盘、挂载新硬盘。

1、首先列出文件系统的整体磁盘空间使用情况。可以用来查看磁盘已被使用多少空间和还剩余多少空间

df -h

2、列出所有可用块设备的信息，显示他们之间的依赖关系

 lsblk

3、分区操作，其中vdb是需要分区的盘

fdisk /dev/vdb

(1)输入 **n** 创建一个新的分区

(2)选择默认 **p** 选择主分区 **e** 扩展分区 直接默认回车就是选择 **p**

(3)输入分区号，默认从1开始，默认**回车**

(4)sector 起始扇区 (2048-4294967295, 默认 2048)：默认**回车**

(5)\+ 多少扇区 或多大空间，不会计算的话 可以 写 **+1G** 或者 选择默认**回车**

(6)最后输入**w** 保存。

(7)查看，新建的区分已显示出来

ls  /dev/vdb*

(8)格式化分区vdb1

mkfs.ext4 /dev/vdb1

(9)创建一个挂载点

mkidr /application

(10)挂载

mount /dev/vdb1 /application

ok 现在可以看到已经成功挂载，下面开始配置开机自动挂载，否则重启后挂载点消失

(11)开机自动挂载

vi /etc/fstab

新增以下配置

/dev/vdb1    /application        ext4   default  0    1

(12)将 /etc/fstab 中定义的所有档案系统挂上。

mount -a

以上内容参考于https://www.codenong.com/p2019120211969148/

---------------------

下面是在原有分区上扩容操作

推荐虚拟机数据磁盘使用方式：
通过fdisk /dev/vdb新建一个分区vdb1，然后将将vdb1创建成一个pv，然后再将此pv创建成一个vg（datavg），然后再在此vg上创建一个lv（datalv），再将此lv格式化成xfs（推荐）或者ext4，再挂载至/mnt目录。
扩容操作：
例如需要将数据盘/dev/vdb，从100G扩容至200G，并扩容对应的lv及文件系统。
首先备份数据盘关键数据！
先通过vcs的磁盘扩容功能将虚拟机的磁盘从100G扩容至200G；
新建分区vdb2，并默认使用所有剩余空间：fdisk /dev/vdb
刷新分区：partx -a /dev/vdb2
将vdb2创建成pv：pvcreate /dev/vdb2
vg扩容：vgextend datavg /dev/vdb2
lv扩容：lvextend -L +100G datavg/datalv
刷新文件系统（适用于xfs）：xfs_growfs /dev/datavg/datalv
刷新文件系统（适用于ext4）：resize2fs /dev/datavg/datalv